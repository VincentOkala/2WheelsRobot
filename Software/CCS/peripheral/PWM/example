#include <stdbool.h>
#include <stdint.h>

#include <driverlib/sysctl.h>
#include <slib/TIME/TIME.h>
#include <modules/GY521/GY521.h>
#include <slib/CONSOLE/CONSOLE.h>
#include <slib/STATESYSTEM/StateSystem.h>
#include <peripheral/PWM/PWM.h>
#include <peripheral/GPIO/GPIO.h>

/**
 * main.c
 */

int main(void)
{
    //Set the system clock to 80Mhz
     SysCtlClockSet(SYSCTL_SYSDIV_2_5|SYSCTL_USE_PLL|SYSCTL_OSC_MAIN|SYSCTL_XTAL_16MHZ);

     PWM pwm0 = PWM(PWM1, PWM_GEN_0, 20000);
     pwm0.setOutMode(PWM_OUT_0_BIT, PORTD, GPIO_PIN_0, GPIO_PD0_M1PWM0, 50.8);
     pwm0.setOutMode(PWM_OUT_1_BIT, PORTD, GPIO_PIN_1, GPIO_PD1_M1PWM1, 70.7);
     uint8_t duty = 5;
     
    while(1){
		duty ++;
		duty = (duty == 100) ? 1 : duty;
		SysCtlDelay(160000);
		pwm0.setDuty(PWM_OUT_6, duty);
    }
}
